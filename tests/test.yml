---
# test file for hswong3i.bitbucket

- hosts: localhost
  remote_user: root
  pre_tasks:
    - name: Ensure JDK Version 8 available
      apt_repository: repo="{{ item }}"
      when: ansible_distribution == 'Ubuntu'
            and ( ansible_distribution_version == '12.04'
                  or ansible_distribution_version == '14.04')
      with_items:
        - "ppa:fkrull/deadsnakes-python2.7"
        - "ppa:openjdk-r/ppa"
    - name: Update Cache
      apt:
        name: python2.7
        update_cache: yes
      when: ansible_distribution == 'Ubuntu'
            and ( ansible_distribution_version == '12.04'
                  or ansible_distribution_version == '14.04')
    - name: Ensure Centos SCL Release available
      yum:
        name: centos-release-SCL
        state: installed
      when: ansible_distribution == 'Centos'
            and ( ansible_distribution_version == '6')
    - name: Ensure SCL Python 2.7 installed
      yum:
        name: python27
        state: installed
      when: ansible_distribution == 'Centos'
            and ( ansible_distribution_version == '6')
  roles:
    - role: geerlingguy.java
      java_packages:
        - java-1.8.0-openjdk
      when: ansible_os_family == 'RedHat'
    - role: geerlingguy.java
      java_packages:
        - openjdk-8-jdk
      when: ansible_os_family == 'Debian'
    - role_under_test
